import React from 'react';
import PropTypes from 'prop-types';
import { CSSTransition } from 'react-transition-group';
import Icon from '../Icon';

export default class ValidationIcon extends React.Component {
  constructor(props) {
    super(props);

    this.state = {
      visible: this.props.visible,
    };
  }

  render() {
    const { validationState } = this.props;
    let { iconDisplay } = this.props;

    let icon = '';
    switch (validationState) {
      case 'success':
        icon = 'checkmark';
        break;
      case 'error':
        icon = 'error';
        break;
      case 'warning':
        icon = 'alert';
        break;
      case 'incomplete':
      default:
        icon = 'checkmark';
        iconDisplay = 'outline';
    }

    const iconClassName = `has-${validationState}`;

    return (
      <CSSTransition in={this.state.visible} timeout={200} classNames="PnnlValidationIcon" appear>
        <span className={`PnnlValidationIcon ${iconClassName}`}>
          <Icon icon={icon} iconDisplay={iconDisplay} />
        </span>
      </CSSTransition>
    );
  }
}

ValidationIcon.propTypes = {
  /**
    * The validation status to expose via icon.
    * */
  validationState: PropTypes.oneOf(['success', 'error', 'incomplete', 'warning']).isRequired,

  /**
   * The iconDisplay value override.
   */
  iconDisplay: PropTypes.oneOf(['solid', 'outline', 'all']),

  /**
   * Whether the icon is currently displayed.
   */
  visible: PropTypes.bool,
};

ValidationIcon.defaultProps = {
  iconDisplay: 'all',
  visible: true,
};
