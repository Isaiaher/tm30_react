{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar colorscaleCalc = require('../../components/colorscale/calc');\n\nmodule.exports = function calc(gd, trace) {\n  var i;\n  var u = trace.u;\n  var v = trace.v;\n  var w = trace.w;\n  var x = trace.x;\n  var y = trace.y;\n  var z = trace.z;\n  var len = Math.min(x.length, y.length, z.length, u.length, v.length, w.length);\n  var slen = 0;\n  var startx, starty, startz;\n\n  if (trace.starts) {\n    startx = trace.starts.x || [];\n    starty = trace.starts.y || [];\n    startz = trace.starts.z || [];\n    slen = Math.min(startx.length, starty.length, startz.length);\n  }\n\n  var normMax = 0;\n  var normMin = Infinity;\n\n  for (i = 0; i < len; i++) {\n    var uu = u[i];\n    var vv = v[i];\n    var ww = w[i];\n    var norm = Math.sqrt(uu * uu + vv * vv + ww * ww);\n    normMax = Math.max(normMax, norm);\n    normMin = Math.min(normMin, norm);\n  }\n\n  colorscaleCalc(gd, trace, {\n    vals: [normMin, normMax],\n    containerStr: '',\n    cLetter: 'c'\n  });\n  var xMax = -Infinity;\n  var xMin = Infinity;\n  var yMax = -Infinity;\n  var yMin = Infinity;\n  var zMax = -Infinity;\n  var zMin = Infinity;\n\n  for (i = 0; i < len; i++) {\n    var xx = x[i];\n    xMax = Math.max(xMax, xx);\n    xMin = Math.min(xMin, xx);\n    var yy = y[i];\n    yMax = Math.max(yMax, yy);\n    yMin = Math.min(yMin, yy);\n    var zz = z[i];\n    zMax = Math.max(zMax, zz);\n    zMin = Math.min(zMin, zz);\n  }\n\n  for (i = 0; i < slen; i++) {\n    var sx = startx[i];\n    xMax = Math.max(xMax, sx);\n    xMin = Math.min(xMin, sx);\n    var sy = starty[i];\n    yMax = Math.max(yMax, sy);\n    yMin = Math.min(yMin, sy);\n    var sz = startz[i];\n    zMax = Math.max(zMax, sz);\n    zMin = Math.min(zMin, sz);\n  }\n\n  trace._len = len;\n  trace._slen = slen;\n  trace._normMax = normMax;\n  trace._xbnds = [xMin, xMax];\n  trace._ybnds = [yMin, yMax];\n  trace._zbnds = [zMin, zMax];\n};","map":null,"metadata":{},"sourceType":"script"}