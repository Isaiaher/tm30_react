/* eslint jsx-a11y/alt-text:0 */
import React, { Component } from 'react';
import config from '../config';

class Image extends Component {
  state = {
    hasError: false
  }

  onImageError = (e) => {
    const { hasError } = this.state;

    // To prevent infinite loop we only change src to default image once,
    // just in case there is a problem with default image.
    if (!hasError) {
      e.target.src = config.defaultPersonImage;
    }

    this.setState({ hasError: true });
  }

  render() {
    return (
      <img
        {...this.props}
        onError={this.onImageError}
      />
    );
  }
}

export default Image;
