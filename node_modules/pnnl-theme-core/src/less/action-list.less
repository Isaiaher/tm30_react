// PNNL App Action List
// Author: Geoff Elliott

.pnnl-action,
.PnnlAction,
.btn.PnnlAction {
    position: relative;
    display: inline-block;
    text-align: center;
    line-height: @line-height-base;
    transition: color 0.1s ease, background-color 0.1s ease;

    /* Override default appearance for <button>, .btn */
    -webkit-appearance: none;
    -moz-appearance: none;
    border: none;
    background-color: transparent;
    box-shadow: none;
    border-radius: 0;

    &.danger, &.info {
        /* Override basic color rules */
        background-color: transparent;
        color: @navbar-default-color;
    }

    &:focus,
    &:active,
    &:focus:active {
        // outline: none;
        box-shadow: none;
        background-color: transparent;
    }

    .open & {
        transition: color 0s ease, background-color 0.1s ease;
    }

    &:link,
    &:visited,
    & {
        color: @navbar-default-color;
        text-decoration: none;

        /* Copied from .btn, for link actions */
        white-space: nowrap;
        padding: 8px 15px;

        small {
            color: @silver-80;
        }
    }

    &:hover {
        text-decoration: none;
    }

    &:not(.disabled):hover {
        color: white;
        background-color: @link-color;

        small {
            color: white;
        }
    }

    &.disabled {
        opacity: 0.6;
        cursor: not-allowed;
    }

    &.additive:hover {
        background-color: @emerald;
    }

    &.danger:hover {
        background-color: @brand-danger;
    }

    &.favorite:hover {
        background-color: @gold;
    }

    &.info:hover {
        background-color: @brand-info;
    }

    small {
        font-size: @font-size-small;
    }

    @action-icon-size: @font-size-large * 1.2;

    span[class^='pnnl-icon-'], .PnnlIcon {
        display: block;
        font-size: @action-icon-size;
        line-height: 0.75;

        /* Counteract rules that may apply if the PnnlAction is also a btn */
        margin: 0 auto;
        position: static;
    }

    .caret {
        position: absolute;
        top: 50%;
        margin-top: -2px; /* Half the size of the caret */
        left: 50%;
        margin-left: @action-icon-size * 0.55;
    }
}

// .pnnl-action {
//   .pnnl-action-list ul li & {
//     flex-grow: 0;
//     padding: 0;

//     > div {
//       min-width: 60px;
//       padding: @padding-large-vertical @padding-base-horizontal / 2;
//     }
//   }
//   &:hover {
//     .headings & {
//       background-color: transparent;
//     }
//   }
// }


ul.pnnl-action-list,
ul.PnnlActionList {
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    flex-wrap: nowrap;
    box-pack: justify;
    justify-content: space-between;
    align-items: stretch;
    margin-bottom: @padding-large-vertical;
    position: relative;
    clear: both;

    & + & {
        margin-top: @padding-large-vertical * 3;
    }

    > li {
        background-color: white;
        width: 100%;
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;

        > * {
            position: relative;
            padding: @padding-base-vertical @padding-base-horizontal;
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            flex-grow: 1;
            flex-basis: 0;
            vertical-align: middle;
            align-items: center;
            margin: 0;

            &.pnnl-action, &.empty-action, &.PnnlAction {
                display: flex; // Override the display: inline-block from .btn.PnnlAction
                flex-direction: column;
                justify-content: center;
                flex-grow: 0;
                min-width: 60px;
            }

            &.empty-action:hover {
                background-color: transparent;
            }

            &.flex-grow-0 {
                flex-grow: 0;
            }
            &.flex-grow-1 {
                flex-grow: 1;
            }
            &.flex-grow-2 {
                flex-grow: 2;
            }
            &.flex-grow-3 {
                flex-grow: 3;
            }
            &.flex-grow-4 {
                flex-grow: 4;
            }
            &.flex-grow-5 {
                flex-grow: 5;
            }
            &.flex-grow-6 {
                flex-grow: 6;
            }
            &.flex-grow-7 {
                flex-grow: 7;
            }
            &.flex-grow-8 {
                flex-grow: 8;
            }
            &.flex-grow-9 {
                flex-grow: 9;
            }
            &.flex-grow-10 {
                flex-grow: 10;
            }
        }

        &.align-top {
            > * {
                vertical-align: top;
                align-items: flex-start;

                &.pnnl-action,
                &.PnnlAction {
                    align-items: center;
                    justify-content: flex-start;
                }
            }
        }

        &.align-bottom {
            > * {
                vertical-align: bottom;
                align-items: flex-end;

                &.pnnl-action,
                &.PnnlAction {
                    align-items: center;
                    justify-content: flex-end;
                }
            }
        }

        &.align-left {
            align-items: left;
        }

        .align-right {
            align-items: right;
        }

        small {
            display: block;
            color: @silver;
            font-size: @font-size-small;
        }

        & + li {
            border-top: 1px solid @platinum-20;
        }

        &.headings {
            background-color: transparent;
            font-size: @font-size-small;
            color: @silver;
            text-transform: uppercase;

            > * {
                padding-bottom: 2px;

                &:hover {
                    background-color: transparent;
                }
            }

            & + li {
                border-top: none;
            }
        }
    }
}

@media (max-width: @screen-xs-max) {
    ul.pnnl-action-list,
    ul.PnnlActionList {
        border-bottom: 1px solid @platinum-30;

        // If the list is within a grid column, add negative margins to run edge-to-edge
        [class^=col-] & {
            margin-left: -@padding-base-horizontal;
            margin-right: -@padding-base-horizontal;
        }

        > li {
            overflow: hidden;
            position: relative;
            z-index: 1;
            background-color: transparent;

            > *:not(.pnnl-action),
            > *:not(.PnnlAction) {
                background-color: white;
            }

            .pnnl-action,
            .PnnlAction {
                position: absolute;
                top: 0;
                bottom: 0;
                z-index: -1;
                background-color: @topaz;
                color: white;

                small {
                    display: none;
                }

                &.additive {
                    background-color: @emerald;
                }

                &.danger {
                    background-color: @brand-danger;
                }

                &.favorite {
                    background-color: @gold;
                }

                &.info {
                    background-color: @brand-info;
                }

                &:first-child {
                    left: 0;
                }

                &:last-child {
                    right: 0;
                }
            }

            .empty-action {
                display: none;
            }

            &.headings {
                > * {
                    background-color: transparent !important;
                }

                & + li {
                    border-top: 1px solid @platinum-30;
                }
            }
        }
    }
}
