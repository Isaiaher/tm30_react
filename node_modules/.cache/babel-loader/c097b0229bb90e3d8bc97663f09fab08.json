{"ast":null,"code":"var _jsxFileName = \"/Users/sche566/OneDrive - PNNL/Code/ies_tm30_web_app/React App/src/components/pages/Calculator/Sections/Paste.jsx\";\n\n/**\n * Paste.\n *\n * A component for the Paste option of the calculator.\n * A user can paste in an SPD and run the TM30\n * Calculation with that input.\n *\n * !The backend can not handle anything that is not a 380-780 by 1 step SPD as of 11.07.2018\n *\n * TODO Implement the Linear Interpolation functionality to the Pasting option.\n *\n * @author Isaiah Scheel.\n * @since  11.07.2019\n */\n\n/**\n * Imports\n */\nimport React, { Component } from \"react\"; //import Button from \"react-bootstrap/es/Button\";\n\nimport Button from \"@material-ui/core/Button\";\nimport { withRouter } from \"react-router-dom\";\nimport LoadingSpinner from \"pnnl-react-core/lib/Loader\";\nimport axios from \"axios\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport { withStyles, makeStyles } from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Col from \"react-bootstrap/es/Col\";\nimport Row from \"react-bootstrap/es/Row\";\nconst LightTooltip = withStyles(theme => ({\n  tooltip: {\n    boxShadow: theme.shadows[10],\n    fontSize: 14\n  }\n}))(Tooltip);\n/**\n * Paste Class\n */\n\nexport class Paste extends Component {\n  /**\n   * Constructor that sets the state and binds some handler functions\n   * @param {*} props\n   */\n  constructor(props) {\n    super(props);\n\n    this.handleSPDChange = event => {\n      this.setState({\n        spd_paste: event.target.value\n      }, function () {\n        if (this.state.spd_paste !== \"\" && this.state.step !== \"\" && this.state.wavelength_end !== \"\" && this.state.wavelength_start !== \"\") {\n          this.setState({\n            disabled: false\n          });\n        } else {\n          this.setState({\n            disabled: true\n          });\n        }\n      });\n    };\n\n    this.handleStartChange = event => {\n      this.setState({\n        wavelength_start: event.target.value\n      }, function () {\n        console.log(\"setState completed\", this.state);\n\n        if (this.state.spd_paste !== \"\" && this.state.step !== \"\" && this.state.wavelength_end !== \"\" && this.state.wavelength_start !== \"\") {\n          this.setState({\n            disabled: false\n          });\n        } else {\n          this.setState({\n            disabled: true\n          });\n        }\n      });\n    };\n\n    this.handleEndChange = event => {\n      this.setState({\n        wavelength_end: event.target.value\n      }, function () {\n        console.log(\"setState completed\", this.state);\n\n        if (this.state.spd_paste !== \"\" && this.state.step !== \"\" && this.state.wavelength_end !== \"\" && this.state.wavelength_start !== \"\") {\n          this.setState({\n            disabled: false\n          });\n        } else {\n          this.setState({\n            disabled: true\n          });\n        }\n      });\n    };\n\n    this.handleStepChange = event => {\n      this.setState({\n        step: parseInt(event.target.value)\n      }, function () {\n        console.log(\"setState completed\", this.state);\n\n        if (this.state.spd_paste !== \"\" && this.state.step !== \"\" && this.state.wavelength_end !== \"\" && this.state.wavelength_start !== \"\") {\n          this.setState({\n            disabled: false\n          });\n        } else {\n          this.setState({\n            disabled: true\n          });\n        }\n      });\n    };\n\n    this.state = {\n      spd_paste: \"\",\n      //the SPD string inputed to the text area\n      spd_array: [],\n      //the SPD array that is made from splicing the string\n      wavelength_array: [],\n      loading: false,\n      //Boolean to control the loader\n      data: [],\n      //Data that is returned from the C code\n      wavelength_start: 380,\n      //The starting wavelength with default value of 380\n      wavelength_end: 780,\n      //The ending wavelength with default value of 780\n      step: 1,\n      //The step size with default value of 1\n      disabled: true //Boolean to control if the button is disabled or not. Default is that it is.\n\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleSPDChange = this.handleSPDChange.bind(this);\n  }\n  /**\n   * Start of Handler functions-----------------------------------\n   */\n\n  /**\n   * Function that handles when the SPD paste text area is changed.\n   * Stores the value in state and checks if it should unlock\n   * the 'Calculation' button by checking all the other fields\n   */\n\n\n  /**\n   * Handle the submission of a psted in SPD\n   * @param {*} event\n   */\n  handleSubmit(event) {\n    /**\n     * Check to see if the SPD is 380-780 by a step of 1\n     * !This calculator does not allow for any other type of SPD\n     * !than 380-780 by 1 for the time being.\n     */\n    if (false //this.state.wavelength_start !== 380 ||\n    //this.state.wavelength_end !== 780 ||\n    //this.state.step !== 1\n    ) {\n        alert(\"Sorry SPDs other than 380-780 by stepd of 1 are not permitted\");\n      } else {\n      this.setState({\n        wavelength_array: []\n      }, function () {\n        var i;\n        var array_i = 0;\n\n        for (i = this.state.wavelength_start; i <= this.state.wavelength_end; i += this.state.step) {\n          console.log(\"i = \".concat(i, \" array_i = \").concat(array_i, \" start = \").concat(this.state.wavelength_start, \" end = \").concat(this.state.wavelength_end));\n          this.state.wavelength_array[array_i] = i;\n          array_i++;\n        } //console.log(this.state.wavelength_array);\n\n      });\n      /**\n       * Set state to place the text area SPD Paste as an array into spd_array\n       */\n\n      this.setState({\n        spd_array: this.state.spd_paste.split(\"\\n\")\n      }, function () {\n        console.log(this.state.spd_array);\n\n        if (this.state.spd_array.length === this.state.wavelength_array.length) {\n          this.setState({\n            loading: true\n          }, () => {\n            axios.defaults.headers.common = {};\n            axios.defaults.headers.common.accept = \"application/json\";\n            axios.post(\"/tm30Paste\", {\n              spd: this.state.spd_array,\n              wavelength: this.state.wavelength_array\n            }).then(res => {\n              return res.data;\n            }).then(data => {\n              /**\n               * Set the state that loading is false,\n               * data is the json from the C code\n               * and tableReady is true\n               *\n               * TODO: TableReady is no longer used. Could take out.\n               */\n              this.setState({\n                loading: false,\n                data: data.data,\n                tableReady: true\n              });\n              /**\n               * Used later to store the data in cache\n               * localStorage.setItem(\"data\", JSON.stringify(this.state.data));\n               */\n\n              /**\n               * Pushes the data to the Reports page and redirects to that page\n               */\n\n              this.props.history.push({\n                pathname: \"/Report\",\n                state: {\n                  data: this.state.data\n                }\n              });\n            });\n          });\n        } else {\n          alert(\"Error: Length of SPD array does not match length of wavelength array.\");\n        }\n      });\n    }\n  }\n  /**\n   * End of Handler functions-----------------------------------\n   */\n\n  /**\n   * Render function for Paste\n   */\n\n\n  render() {\n    var loading = this.state.loading;\n    return React.createElement(\"div\", {\n      className: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, \"Paste SPD Data\"), React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        position: \"inherit\",\n        display: \"inline-block\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(LightTooltip, {\n      title: \"Recommended value is 380 nm. Value may not be greater than 400 nm.\",\n      placement: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      onChange: this.handleStartChange //defaultValue={380}\n      ,\n      id: \"standard-basic\",\n      label: \"Start Wavelength (nm):\",\n      inputProps: {\n        style: {\n          fontSize: 14\n        }\n      } // font size of input text\n      ,\n      InputLabelProps: {\n        style: {\n          fontSize: 14\n        }\n      } // font size of input label\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, React.createElement(LightTooltip, {\n      title: \"Recommended value is 780 nm. Value may not be less than 700 nm.\",\n      placement: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      onChange: this.handleEndChange //defaultValue={Y80}\n      ,\n      id: \"standard-basic\",\n      label: \"End Wavelength (nm):\",\n      inputProps: {\n        style: {\n          fontSize: 14\n        }\n      } // font size of input text\n      ,\n      InputLabelProps: {\n        style: {\n          fontSize: 14\n        }\n      } // font size of input label\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, React.createElement(LightTooltip, {\n      title: \"Recommended value is 1 nm. Value may not be greater than 5 nm.\",\n      placement: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      onChange: this.handleStepChange //defaultValue={1}\n      ,\n      id: \"standard-basic\",\n      label: \"Interval (nm):\",\n      inputProps: {\n        style: {\n          fontSize: 14\n        }\n      } // font size of input text\n      ,\n      InputLabelProps: {\n        style: {\n          fontSize: 14\n        }\n      } // font size of input label\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      style: {\n        position: \"inherit\",\n        display: \"inline-block\",\n        width: \"5%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        position: \"inherit\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313\n      },\n      __self: this\n    }, React.createElement(LightTooltip, {\n      title: \"Wavelength values generated automatically.  Power values entered by user.\",\n      placement: \"right-start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      id: \"outlined-multiline-static\",\n      label: \"SPD Values\",\n      multiline: true,\n      rows: \"10\",\n      margin: \"normal\",\n      variant: \"outlined\",\n      inputProps: {\n        style: {\n          fontSize: 14\n        }\n      } // font size of input text\n      ,\n      InputLabelProps: {\n        style: {\n          fontSize: 14\n        }\n      } // font size of input label\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322\n      },\n      __self: this\n    }))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    }), loading ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }, \" \", \"Calculating Results \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339\n      },\n      __self: this\n    }), \" \", React.createElement(LoadingSpinner, {\n      color: \"copper\",\n      size: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340\n      },\n      __self: this\n    }), \" \")) : React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    }), React.createElement(Col, {\n      xs: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346\n      },\n      __self: this\n    }, React.createElement(LightTooltip, {\n      title: \"Runs the calculation when enough data is entered\",\n      placement: \"right-start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"outlined\",\n      onClick: this.handleSubmit,\n      disabled: this.state.disabled,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, \"Calculate\")))), React.createElement(Col, {\n      xs: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362\n      },\n      __self: this\n    }))));\n  }\n\n}\n/**\n * Export withRouter so we can jump to the Reports page\n */\n\nexport default withRouter(Paste);","map":{"version":3,"sources":["/Users/sche566/OneDrive - PNNL/Code/ies_tm30_web_app/React App/src/components/pages/Calculator/Sections/Paste.jsx"],"names":["React","Component","Button","withRouter","LoadingSpinner","axios","Tooltip","withStyles","makeStyles","TextField","Col","Row","LightTooltip","theme","tooltip","boxShadow","shadows","fontSize","Paste","constructor","props","handleSPDChange","event","setState","spd_paste","target","value","state","step","wavelength_end","wavelength_start","disabled","handleStartChange","console","log","handleEndChange","handleStepChange","parseInt","spd_array","wavelength_array","loading","data","handleSubmit","bind","alert","i","array_i","split","length","defaults","headers","common","accept","post","spd","wavelength","then","res","tableReady","history","push","pathname","render","position","display","style","width"],"mappings":";;AAAA;;;;;;;;;;;;;;;AAcA;;;AAGA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC,C,CACA;;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,cAAP,MAA2B,4BAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,SAASC,UAAT,EAAqBC,UAArB,QAAuC,0BAAvC;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,GAAP,MAAgB,wBAAhB;AACA,OAAOC,GAAP,MAAgB,wBAAhB;AAEA,MAAMC,YAAY,GAAGL,UAAU,CAACM,KAAK,KAAK;AACxCC,EAAAA,OAAO,EAAE;AACPC,IAAAA,SAAS,EAAEF,KAAK,CAACG,OAAN,CAAc,EAAd,CADJ;AAEPC,IAAAA,QAAQ,EAAE;AAFH;AAD+B,CAAL,CAAN,CAAV,CAKjBX,OALiB,CAArB;AAOA;;;;AAGA,OAAO,MAAMY,KAAN,SAAoBjB,SAApB,CAA8B;AACnC;;;;AAIAkB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SA0BnBC,eA1BmB,GA0BDC,KAAK,IAAI;AACzB,WAAKC,QAAL,CAAc;AAAEC,QAAAA,SAAS,EAAEF,KAAK,CAACG,MAAN,CAAaC;AAA1B,OAAd,EAAiD,YAAW;AAC1D,YACE,KAAKC,KAAL,CAAWH,SAAX,KAAyB,EAAzB,IACA,KAAKG,KAAL,CAAWC,IAAX,KAAoB,EADpB,IAEA,KAAKD,KAAL,CAAWE,cAAX,KAA8B,EAF9B,IAGA,KAAKF,KAAL,CAAWG,gBAAX,KAAgC,EAJlC,EAKE;AACA,eAAKP,QAAL,CAAc;AAAEQ,YAAAA,QAAQ,EAAE;AAAZ,WAAd;AACD,SAPD,MAOO;AACL,eAAKR,QAAL,CAAc;AAAEQ,YAAAA,QAAQ,EAAE;AAAZ,WAAd;AACD;AACF,OAXD;AAYD,KAvCkB;;AAAA,SA6CnBC,iBA7CmB,GA6CCV,KAAK,IAAI;AAC3B,WAAKC,QAAL,CAAc;AAAEO,QAAAA,gBAAgB,EAAER,KAAK,CAACG,MAAN,CAAaC;AAAjC,OAAd,EAAwD,YAAW;AACjEO,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkC,KAAKP,KAAvC;;AACA,YACE,KAAKA,KAAL,CAAWH,SAAX,KAAyB,EAAzB,IACA,KAAKG,KAAL,CAAWC,IAAX,KAAoB,EADpB,IAEA,KAAKD,KAAL,CAAWE,cAAX,KAA8B,EAF9B,IAGA,KAAKF,KAAL,CAAWG,gBAAX,KAAgC,EAJlC,EAKE;AACA,eAAKP,QAAL,CAAc;AAAEQ,YAAAA,QAAQ,EAAE;AAAZ,WAAd;AACD,SAPD,MAOO;AACL,eAAKR,QAAL,CAAc;AAAEQ,YAAAA,QAAQ,EAAE;AAAZ,WAAd;AACD;AACF,OAZD;AAaD,KA3DkB;;AAAA,SAiEnBI,eAjEmB,GAiEDb,KAAK,IAAI;AACzB,WAAKC,QAAL,CAAc;AAAEM,QAAAA,cAAc,EAAEP,KAAK,CAACG,MAAN,CAAaC;AAA/B,OAAd,EAAsD,YAAW;AAC/DO,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkC,KAAKP,KAAvC;;AACA,YACE,KAAKA,KAAL,CAAWH,SAAX,KAAyB,EAAzB,IACA,KAAKG,KAAL,CAAWC,IAAX,KAAoB,EADpB,IAEA,KAAKD,KAAL,CAAWE,cAAX,KAA8B,EAF9B,IAGA,KAAKF,KAAL,CAAWG,gBAAX,KAAgC,EAJlC,EAKE;AACA,eAAKP,QAAL,CAAc;AAAEQ,YAAAA,QAAQ,EAAE;AAAZ,WAAd;AACD,SAPD,MAOO;AACL,eAAKR,QAAL,CAAc;AAAEQ,YAAAA,QAAQ,EAAE;AAAZ,WAAd;AACD;AACF,OAZD;AAaD,KA/EkB;;AAAA,SAqFnBK,gBArFmB,GAqFAd,KAAK,IAAI;AAC1B,WAAKC,QAAL,CAAc;AAAEK,QAAAA,IAAI,EAAES,QAAQ,CAACf,KAAK,CAACG,MAAN,CAAaC,KAAd;AAAhB,OAAd,EAAsD,YAAW;AAC/DO,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkC,KAAKP,KAAvC;;AACA,YACE,KAAKA,KAAL,CAAWH,SAAX,KAAyB,EAAzB,IACA,KAAKG,KAAL,CAAWC,IAAX,KAAoB,EADpB,IAEA,KAAKD,KAAL,CAAWE,cAAX,KAA8B,EAF9B,IAGA,KAAKF,KAAL,CAAWG,gBAAX,KAAgC,EAJlC,EAKE;AACA,eAAKP,QAAL,CAAc;AAAEQ,YAAAA,QAAQ,EAAE;AAAZ,WAAd;AACD,SAPD,MAOO;AACL,eAAKR,QAAL,CAAc;AAAEQ,YAAAA,QAAQ,EAAE;AAAZ,WAAd;AACD;AACF,OAZD;AAaD,KAnGkB;;AAEjB,SAAKJ,KAAL,GAAa;AACXH,MAAAA,SAAS,EAAE,EADA;AACI;AACfc,MAAAA,SAAS,EAAE,EAFA;AAEI;AACfC,MAAAA,gBAAgB,EAAE,EAHP;AAIXC,MAAAA,OAAO,EAAE,KAJE;AAIK;AAChBC,MAAAA,IAAI,EAAE,EALK;AAKD;AACVX,MAAAA,gBAAgB,EAAE,GANP;AAMY;AACvBD,MAAAA,cAAc,EAAE,GAPL;AAOU;AACrBD,MAAAA,IAAI,EAAE,CARK;AAQF;AACTG,MAAAA,QAAQ,EAAE,IATC,CASI;;AATJ,KAAb;AAWA,SAAKW,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKtB,eAAL,GAAuB,KAAKA,eAAL,CAAqBsB,IAArB,CAA0B,IAA1B,CAAvB;AACD;AAED;;;;AAIA;;;;;;;AA+EA;;;;AAIAD,EAAAA,YAAY,CAACpB,KAAD,EAAQ;AAClB;;;;;AAKA,QACE,KADF,CAEE;AACA;AACA;AAJF,MAKE;AACAsB,QAAAA,KAAK,CAAC,+DAAD,CAAL;AACD,OAPD,MAOO;AACL,WAAKrB,QAAL,CACE;AACEgB,QAAAA,gBAAgB,EAAE;AADpB,OADF,EAIE,YAAW;AACT,YAAIM,CAAJ;AACA,YAAIC,OAAO,GAAG,CAAd;;AACA,aACED,CAAC,GAAG,KAAKlB,KAAL,CAAWG,gBADjB,EAEEe,CAAC,IAAI,KAAKlB,KAAL,CAAWE,cAFlB,EAGEgB,CAAC,IAAI,KAAKlB,KAAL,CAAWC,IAHlB,EAIE;AACAK,UAAAA,OAAO,CAACC,GAAR,eACSW,CADT,wBACwBC,OADxB,sBAC2C,KAAKnB,KAAL,CAAWG,gBADtD,oBACgF,KAAKH,KAAL,CAAWE,cAD3F;AAGA,eAAKF,KAAL,CAAWY,gBAAX,CAA4BO,OAA5B,IAAuCD,CAAvC;AACAC,UAAAA,OAAO;AACR,SAbQ,CAcT;;AACD,OAnBH;AAsBA;;;;AAGA,WAAKvB,QAAL,CACE;AAAEe,QAAAA,SAAS,EAAE,KAAKX,KAAL,CAAWH,SAAX,CAAqBuB,KAArB,CAA2B,IAA3B;AAAb,OADF,EAEE,YAAW;AACTd,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKP,KAAL,CAAWW,SAAvB;;AACA,YACE,KAAKX,KAAL,CAAWW,SAAX,CAAqBU,MAArB,KAAgC,KAAKrB,KAAL,CAAWY,gBAAX,CAA4BS,MAD9D,EAEE;AACA,eAAKzB,QAAL,CAAc;AAAEiB,YAAAA,OAAO,EAAE;AAAX,WAAd,EAAiC,MAAM;AACrCnC,YAAAA,KAAK,CAAC4C,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,GAAgC,EAAhC;AACA9C,YAAAA,KAAK,CAAC4C,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8BC,MAA9B,GAAuC,kBAAvC;AACA/C,YAAAA,KAAK,CACFgD,IADH,CACQ,YADR,EACsB;AAClBC,cAAAA,GAAG,EAAE,KAAK3B,KAAL,CAAWW,SADE;AAElBiB,cAAAA,UAAU,EAAE,KAAK5B,KAAL,CAAWY;AAFL,aADtB,EAKGiB,IALH,CAKQC,GAAG,IAAI;AACX,qBAAOA,GAAG,CAAChB,IAAX;AACD,aAPH,EAQGe,IARH,CAQQf,IAAI,IAAI;AACZ;;;;;;;AAOA,mBAAKlB,QAAL,CAAc;AACZiB,gBAAAA,OAAO,EAAE,KADG;AAEZC,gBAAAA,IAAI,EAAEA,IAAI,CAACA,IAFC;AAGZiB,gBAAAA,UAAU,EAAE;AAHA,eAAd;AAKA;;;;;AAKA;;;;AAGA,mBAAKtC,KAAL,CAAWuC,OAAX,CAAmBC,IAAnB,CAAwB;AACtBC,gBAAAA,QAAQ,EAAE,SADY;AAEtBlC,gBAAAA,KAAK,EAAE;AACLc,kBAAAA,IAAI,EAAE,KAAKd,KAAL,CAAWc;AADZ;AAFe,eAAxB;AAMD,aAnCH;AAoCD,WAvCD;AAwCD,SA3CD,MA2CO;AACLG,UAAAA,KAAK,CACH,uEADG,CAAL;AAGD;AACF,OApDH;AAsDD;AACF;AACD;;;;AAIA;;;;;AAGAkB,EAAAA,MAAM,GAAG;AACP,QAAItB,OAAO,GAAG,KAAKb,KAAL,CAAWa,OAAzB;AACA,WACE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,KAAK,EAAE;AAAEuB,QAAAA,QAAQ,EAAE,SAAZ;AAAuBC,QAAAA,OAAO,EAAE;AAAhC,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,YAAD;AACE,MAAA,KAAK,EAAC,oEADR;AAEE,MAAA,SAAS,EAAC,OAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIE,oBAAC,SAAD;AACE,MAAA,QAAQ,EAAE,KAAKhC,iBADjB,CAEE;AAFF;AAGE,MAAA,EAAE,EAAC,gBAHL;AAIE,MAAA,KAAK,EAAC,wBAJR;AAKE,MAAA,UAAU,EAAE;AAAEiC,QAAAA,KAAK,EAAE;AAAEhD,UAAAA,QAAQ,EAAE;AAAZ;AAAT,OALd,CAK2C;AAL3C;AAME,MAAA,eAAe,EAAE;AAAEgD,QAAAA,KAAK,EAAE;AAAEhD,UAAAA,QAAQ,EAAE;AAAZ;AAAT,OANnB,CAMgD;AANhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,CADF,CADF,EAgBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAhBF,EAiBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,YAAD;AACE,MAAA,KAAK,EAAC,iEADR;AAEE,MAAA,SAAS,EAAC,OAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIE,oBAAC,SAAD;AACE,MAAA,QAAQ,EAAE,KAAKkB,eADjB,CAEE;AAFF;AAGE,MAAA,EAAE,EAAC,gBAHL;AAIE,MAAA,KAAK,EAAC,sBAJR;AAKE,MAAA,UAAU,EAAE;AAAE8B,QAAAA,KAAK,EAAE;AAAEhD,UAAAA,QAAQ,EAAE;AAAZ;AAAT,OALd,CAK2C;AAL3C;AAME,MAAA,eAAe,EAAE;AAAEgD,QAAAA,KAAK,EAAE;AAAEhD,UAAAA,QAAQ,EAAE;AAAZ;AAAT,OANnB,CAMgD;AANhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,CADF,CAjBF,EAgCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAhCF,EAiCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,YAAD;AACE,MAAA,KAAK,EAAC,gEADR;AAEE,MAAA,SAAS,EAAC,OAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIE,oBAAC,SAAD;AACE,MAAA,QAAQ,EAAE,KAAKmB,gBADjB,CAEE;AAFF;AAGE,MAAA,EAAE,EAAC,gBAHL;AAIE,MAAA,KAAK,EAAC,gBAJR;AAKE,MAAA,UAAU,EAAE;AAAE6B,QAAAA,KAAK,EAAE;AAAEhD,UAAAA,QAAQ,EAAE;AAAZ;AAAT,OALd,CAK2C;AAL3C;AAME,MAAA,eAAe,EAAE;AAAEgD,QAAAA,KAAK,EAAE;AAAEhD,UAAAA,QAAQ,EAAE;AAAZ;AAAT,OANnB,CAMgD;AANhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,CADF,CAjCF,CADF,EAkDE;AACE,MAAA,KAAK,EAAE;AACL8C,QAAAA,QAAQ,EAAE,SADL;AAELC,QAAAA,OAAO,EAAE,cAFJ;AAGLE,QAAAA,KAAK,EAAE;AAHF,OADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlDF,EAyDE;AAAK,MAAA,KAAK,EAAE;AAAEH,QAAAA,QAAQ,EAAE;AAAZ,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,YAAD;AACE,MAAA,KAAK,EAAC,2EADR;AAGE,MAAA,SAAS,EAAC,aAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAQE,oBAAC,SAAD;AACE,MAAA,EAAE,EAAC,2BADL;AAEE,MAAA,KAAK,EAAC,YAFR;AAGE,MAAA,SAAS,MAHX;AAIE,MAAA,IAAI,EAAC,IAJP;AAKE,MAAA,MAAM,EAAC,QALT;AAME,MAAA,OAAO,EAAC,UANV;AAOE,MAAA,UAAU,EAAE;AAAEE,QAAAA,KAAK,EAAE;AAAEhD,UAAAA,QAAQ,EAAE;AAAZ;AAAT,OAPd,CAO2C;AAP3C;AAQE,MAAA,eAAe,EAAE;AAAEgD,QAAAA,KAAK,EAAE;AAAEhD,UAAAA,QAAQ,EAAE;AAAZ;AAAT,OARnB,CAQgD;AARhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARF,CADF,CAzDF,EA8EE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA9EF,EA+EGuB,OAAO,GACN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,GADH,0BAEsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFtB,EAE6B,GAF7B,EAGE,oBAAC,cAAD;AAAgB,MAAA,KAAK,EAAC,QAAtB;AAA+B,MAAA,IAAI,EAAE,CAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,EAG6C,GAH7C,CADF,CADM,GASN,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,YAAD;AACE,MAAA,KAAK,EAAC,kDADR;AAEE,MAAA,SAAS,EAAC,aAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AACE,MAAA,OAAO,EAAC,UADV;AAEE,MAAA,OAAO,EAAE,KAAKE,YAFhB;AAGE,MAAA,QAAQ,EAAE,KAAKf,KAAL,CAAWI,QAHvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,CAJF,CADF,CAFF,EAkBE,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlBF,CAxFJ,CAFF,CADF;AAmHD;;AAxUkC;AA2UrC;;;;AAGA,eAAe5B,UAAU,CAACe,KAAD,CAAzB","sourcesContent":["/**\n * Paste.\n *\n * A component for the Paste option of the calculator.\n * A user can paste in an SPD and run the TM30\n * Calculation with that input.\n *\n * !The backend can not handle anything that is not a 380-780 by 1 step SPD as of 11.07.2018\n *\n * TODO Implement the Linear Interpolation functionality to the Pasting option.\n *\n * @author Isaiah Scheel.\n * @since  11.07.2019\n */\n/**\n * Imports\n */\nimport React, { Component } from \"react\";\n//import Button from \"react-bootstrap/es/Button\";\nimport Button from \"@material-ui/core/Button\";\nimport { withRouter } from \"react-router-dom\";\nimport LoadingSpinner from \"pnnl-react-core/lib/Loader\";\nimport axios from \"axios\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport { withStyles, makeStyles } from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Col from \"react-bootstrap/es/Col\";\nimport Row from \"react-bootstrap/es/Row\";\n\nconst LightTooltip = withStyles(theme => ({\n  tooltip: {\n    boxShadow: theme.shadows[10],\n    fontSize: 14\n  }\n}))(Tooltip);\n\n/**\n * Paste Class\n */\nexport class Paste extends Component {\n  /**\n   * Constructor that sets the state and binds some handler functions\n   * @param {*} props\n   */\n  constructor(props) {\n    super(props);\n    this.state = {\n      spd_paste: \"\", //the SPD string inputed to the text area\n      spd_array: [], //the SPD array that is made from splicing the string\n      wavelength_array: [],\n      loading: false, //Boolean to control the loader\n      data: [], //Data that is returned from the C code\n      wavelength_start: 380, //The starting wavelength with default value of 380\n      wavelength_end: 780, //The ending wavelength with default value of 780\n      step: 1, //The step size with default value of 1\n      disabled: true //Boolean to control if the button is disabled or not. Default is that it is.\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleSPDChange = this.handleSPDChange.bind(this);\n  }\n\n  /**\n   * Start of Handler functions-----------------------------------\n   */\n\n  /**\n   * Function that handles when the SPD paste text area is changed.\n   * Stores the value in state and checks if it should unlock\n   * the 'Calculation' button by checking all the other fields\n   */\n  handleSPDChange = event => {\n    this.setState({ spd_paste: event.target.value }, function() {\n      if (\n        this.state.spd_paste !== \"\" &&\n        this.state.step !== \"\" &&\n        this.state.wavelength_end !== \"\" &&\n        this.state.wavelength_start !== \"\"\n      ) {\n        this.setState({ disabled: false });\n      } else {\n        this.setState({ disabled: true });\n      }\n    });\n  };\n  /**\n   * Function that handles when the Start Wavelength is changed.\n   * Stores the value in state and checks if it should unlock\n   * the 'Calculation' button by checking all the other fields\n   */\n  handleStartChange = event => {\n    this.setState({ wavelength_start: event.target.value }, function() {\n      console.log(\"setState completed\", this.state);\n      if (\n        this.state.spd_paste !== \"\" &&\n        this.state.step !== \"\" &&\n        this.state.wavelength_end !== \"\" &&\n        this.state.wavelength_start !== \"\"\n      ) {\n        this.setState({ disabled: false });\n      } else {\n        this.setState({ disabled: true });\n      }\n    });\n  };\n  /**\n   * Function that handles when the End Wavelength is changed.\n   * Stores the value in state and checks if it should unlock\n   * the 'Calculation' button by checking all the other fields\n   */\n  handleEndChange = event => {\n    this.setState({ wavelength_end: event.target.value }, function() {\n      console.log(\"setState completed\", this.state);\n      if (\n        this.state.spd_paste !== \"\" &&\n        this.state.step !== \"\" &&\n        this.state.wavelength_end !== \"\" &&\n        this.state.wavelength_start !== \"\"\n      ) {\n        this.setState({ disabled: false });\n      } else {\n        this.setState({ disabled: true });\n      }\n    });\n  };\n  /**\n   * Function that handles when the End Wavelength is changed.\n   * Stores the value in state and checks if it should unlock\n   * the 'Calculation' button by checking all the other fields\n   */\n  handleStepChange = event => {\n    this.setState({ step: parseInt(event.target.value) }, function() {\n      console.log(\"setState completed\", this.state);\n      if (\n        this.state.spd_paste !== \"\" &&\n        this.state.step !== \"\" &&\n        this.state.wavelength_end !== \"\" &&\n        this.state.wavelength_start !== \"\"\n      ) {\n        this.setState({ disabled: false });\n      } else {\n        this.setState({ disabled: true });\n      }\n    });\n  };\n  /**\n   * Handle the submission of a psted in SPD\n   * @param {*} event\n   */\n  handleSubmit(event) {\n    /**\n     * Check to see if the SPD is 380-780 by a step of 1\n     * !This calculator does not allow for any other type of SPD\n     * !than 380-780 by 1 for the time being.\n     */\n    if (\n      false\n      //this.state.wavelength_start !== 380 ||\n      //this.state.wavelength_end !== 780 ||\n      //this.state.step !== 1\n    ) {\n      alert(\"Sorry SPDs other than 380-780 by stepd of 1 are not permitted\");\n    } else {\n      this.setState(\n        {\n          wavelength_array: []\n        },\n        function() {\n          var i;\n          var array_i = 0;\n          for (\n            i = this.state.wavelength_start;\n            i <= this.state.wavelength_end;\n            i += this.state.step\n          ) {\n            console.log(\n              `i = ${i} array_i = ${array_i} start = ${this.state.wavelength_start} end = ${this.state.wavelength_end}`\n            );\n            this.state.wavelength_array[array_i] = i;\n            array_i++;\n          }\n          //console.log(this.state.wavelength_array);\n        }\n      );\n\n      /**\n       * Set state to place the text area SPD Paste as an array into spd_array\n       */\n      this.setState(\n        { spd_array: this.state.spd_paste.split(\"\\n\") },\n        function() {\n          console.log(this.state.spd_array);\n          if (\n            this.state.spd_array.length === this.state.wavelength_array.length\n          ) {\n            this.setState({ loading: true }, () => {\n              axios.defaults.headers.common = {};\n              axios.defaults.headers.common.accept = \"application/json\";\n              axios\n                .post(\"/tm30Paste\", {\n                  spd: this.state.spd_array,\n                  wavelength: this.state.wavelength_array\n                })\n                .then(res => {\n                  return res.data;\n                })\n                .then(data => {\n                  /**\n                   * Set the state that loading is false,\n                   * data is the json from the C code\n                   * and tableReady is true\n                   *\n                   * TODO: TableReady is no longer used. Could take out.\n                   */\n                  this.setState({\n                    loading: false,\n                    data: data.data,\n                    tableReady: true\n                  });\n                  /**\n                   * Used later to store the data in cache\n                   * localStorage.setItem(\"data\", JSON.stringify(this.state.data));\n                   */\n\n                  /**\n                   * Pushes the data to the Reports page and redirects to that page\n                   */\n                  this.props.history.push({\n                    pathname: \"/Report\",\n                    state: {\n                      data: this.state.data\n                    }\n                  });\n                });\n            });\n          } else {\n            alert(\n              \"Error: Length of SPD array does not match length of wavelength array.\"\n            );\n          }\n        }\n      );\n    }\n  }\n  /**\n   * End of Handler functions-----------------------------------\n   */\n\n  /**\n   * Render function for Paste\n   */\n  render() {\n    var loading = this.state.loading;\n    return (\n      <div className=\"center\">\n        <h2>Paste SPD Data</h2>\n        <form>\n          <div style={{ position: \"inherit\", display: \"inline-block\" }}>\n            <label>\n              <LightTooltip\n                title=\"Recommended value is 380 nm. Value may not be greater than 400 nm.\"\n                placement=\"right\"\n              >\n                <TextField\n                  onChange={this.handleStartChange}\n                  //defaultValue={380}\n                  id=\"standard-basic\"\n                  label=\"Start Wavelength (nm):\"\n                  inputProps={{ style: { fontSize: 14 } }} // font size of input text\n                  InputLabelProps={{ style: { fontSize: 14 } }} // font size of input label\n                ></TextField>\n              </LightTooltip>\n            </label>\n            <br />\n            <label>\n              <LightTooltip\n                title=\"Recommended value is 780 nm. Value may not be less than 700 nm.\"\n                placement=\"right\"\n              >\n                <TextField\n                  onChange={this.handleEndChange}\n                  //defaultValue={Y80}\n                  id=\"standard-basic\"\n                  label=\"End Wavelength (nm):\"\n                  inputProps={{ style: { fontSize: 14 } }} // font size of input text\n                  InputLabelProps={{ style: { fontSize: 14 } }} // font size of input label\n                ></TextField>\n              </LightTooltip>\n            </label>\n            <br />\n            <label>\n              <LightTooltip\n                title=\"Recommended value is 1 nm. Value may not be greater than 5 nm.\"\n                placement=\"right\"\n              >\n                <TextField\n                  onChange={this.handleStepChange}\n                  //defaultValue={1}\n                  id=\"standard-basic\"\n                  label=\"Interval (nm):\"\n                  inputProps={{ style: { fontSize: 14 } }} // font size of input text\n                  InputLabelProps={{ style: { fontSize: 14 } }} // font size of input label\n                ></TextField>\n              </LightTooltip>\n            </label>\n          </div>\n          <div\n            style={{\n              position: \"inherit\",\n              display: \"inline-block\",\n              width: \"5%\"\n            }}\n          ></div>\n          <div style={{ position: \"inherit\" }}>\n            <LightTooltip\n              title=\"Wavelength values generated automatically. \n                Power values entered by user.\"\n              placement=\"right-start\"\n            >\n              {\n                //<textarea onChange={this.handleSPDChange}></textarea>\n              }\n              <TextField\n                id=\"outlined-multiline-static\"\n                label=\"SPD Values\"\n                multiline\n                rows=\"10\"\n                margin=\"normal\"\n                variant=\"outlined\"\n                inputProps={{ style: { fontSize: 14 } }} // font size of input text\n                InputLabelProps={{ style: { fontSize: 14 } }} // font size of input label\n              />\n            </LightTooltip>\n          </div>\n          <br />\n          {loading ? (\n            <div>\n              <label>\n                {\" \"}\n                Calculating Results <br />{\" \"}\n                <LoadingSpinner color=\"copper\" size={6} />{\" \"}\n              </label>\n            </div>\n          ) : (\n            <Row>\n              <Col xs={4} />\n              <Col xs={4}>\n                <LightTooltip\n                  title=\"Runs the calculation when enough data is entered\"\n                  placement=\"right-start\"\n                >\n                  <span>\n                    <Button\n                      variant=\"outlined\"\n                      onClick={this.handleSubmit}\n                      disabled={this.state.disabled}\n                    >\n                      Calculate\n                    </Button>\n                  </span>\n                </LightTooltip>\n              </Col>\n              <Col xs={4} />\n            </Row>\n          )}\n        </form>\n      </div>\n    );\n  }\n}\n\n/**\n * Export withRouter so we can jump to the Reports page\n */\nexport default withRouter(Paste);\n"]},"metadata":{},"sourceType":"module"}