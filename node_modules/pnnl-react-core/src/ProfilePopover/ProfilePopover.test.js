import React from 'react';
import { shallow } from 'enzyme';
import ProfilePopover from './ProfilePopover';

global.fetch = jest.fn().mockImplementation(() => new Promise(resolve => resolve()));

/*
* During test writing you can selectively run just these tests or skip individual ones while you
* work on others https://facebook.github.io/jest/docs/en/api.html#testskipname-fn
*/
describe('<ProfilePopover />', () => {
  const defaultProps = {
    person: {
      id: '123',
      firstName: 'John',
      lastName: 'Doe',
      title: 'Super Dev',
      phoneNumber: '',
      emailAddress: 'john.doe@pnl.gov',
      mailstop: '',
      portraitLink: '',
    },
  };

  describe('checking for component import errors', () => {
    it('should be in the component index file', () => {
      const loadedIndexFile = require('../index.js');
      expect(loadedIndexFile).toBeTruthy();
      expect(loadedIndexFile.ProfilePopover).toBeTruthy();
    });

    it('should be in the components directory', () => {
      expect(ProfilePopover).toBeTruthy();
    });
  });

  describe('prop type validation', () => {
    expect(() => shallow(<ProfilePopover />)).toThrowErrorMatchingSnapshot();
  });

  test('ProfilePopover renders expected output', () => {
    const wrapper = shallow(<ProfilePopover {...defaultProps} />);
    expect(wrapper).toMatchSnapshot();
  });
});
