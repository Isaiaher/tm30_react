import React from 'react';
import PropTypes from 'prop-types';
import { connect } from 'react-redux';
import Grid from 'react-bootstrap/es/Grid';
import Header from 'pnnl-react-core/lib/Header';
import Navigation from './Navigation';

import appLogo from '../../../public/images/app_title.png';
import pkgDetails from '../../../package.json';

import { fetchLoggedInUser as fetchLoggedInUserActionCreator } from '../../../actions/me';

export class Container extends React.Component {
  static propTypes = {
    fetchLoggedInUser: PropTypes.func.isRequired,
  }

  componentWillMount() {
    this.props.fetchLoggedInUser();
  }

  render() {
    return (
      <div className="app-root">
        <Header
          appLogo={appLogo}
          appTitle={pkgDetails.displayName}
          primaryNav={<Navigation />}
        />
        <main>
          <Grid>
            {this.props.children}
          </Grid>
        </main>
      </div>
    );
  }
}

export default connect(() => { }, { fetchLoggedInUser: fetchLoggedInUserActionCreator })(Container);